<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light dark" />
    <link rel="stylesheet" href="/.mbr/pico.min.css" />
    <title>{{current_path | default(value="Directory") | safe}}</title>
    <link href="/.mbr/pico.min.css" rel="stylesheet" />
    <link href="/.mbr/theme.css" rel="stylesheet" />
    <link href="/.mbr/user.css" rel="stylesheet" />
  </head>
  <body>
    <header class="container">
      <nav aria-label="breadcrumb" role="navigation">
        <ul>
          {% for crumb in breadcrumbs %}
          <li>
            <small><a href="{{ crumb.url }}">{{ crumb.name }}</a></small>
          </li>
          {% endfor %}
          <li><small>{{ current_dir_name | default(value="Directory") }}</small></li>
        </ul>
      </nav>
      <nav role="navigation" aria-label="Main menu">
        <ul>
          <li>
            <details class="dropdown">
              <summary role="button" class="outline contrast">
                <div class="mbr-hamburger-button" />
              </summary>
              <ul>
                <li>Browse</li>
                <li>Tags</li>
              </ul>
            </details>
          </li>
        </ul>
        <ul>
          <li><strong>{{ current_dir_name | default(value="Directory Listing") }}</strong></li>
        </ul>
        <ul>
          <details class="dropdown">
            <summary role="button" class="outline contrast">
              <div class="mbr-search-button" />
            </summary>
            <ul style="width: 35ch" dir="rtl">
              <li>
                <input
                  type="search"
                  name="search"
                  placeholder="Search"
                  aria-label="Search"
                />
              </li>
            </ul>
          </details>
        </ul>
      </nav>
    </header>
    <main id="wrapper" class="container">
      <h1>{{ current_dir_name | default(value="Directory") }}</h1>

      {% if subdirs %}
      <section>
        <h2>Folders</h2>
        <ul>
          {% for subdir in subdirs %}
          <li>
            <a href="{{ subdir.url_path }}">
              <strong>üìÅ {{ subdir.name }}</strong>
            </a>
          </li>
          {% endfor %}
        </ul>
      </section>
      {% endif %}

      {% if files %}
      <section>
        <h2>Files</h2>
        {% for file in files %}
        <article>
          <header>
            <h3><a href="{{ file.url_path }}">{{ file.title | default(value=file.name) }}</a></h3>
            {% if file.description %}
            <p>{{ file.description }}</p>
            {% endif %}
          </header>
          <footer>
            <small>
              Modified: {{ file.modified_date | default(value="Unknown") }}
              {% if file.tags %}
              | Tags: {{ file.tags }}
              {% endif %}
            </small>
          </footer>
        </article>
        {% endfor %}
      </section>
      {% else %}
        {% if not subdirs %}
        <p><em>No markdown files or folders found in this directory.</em></p>
        {% else %}
        <p><em>No markdown files found in this directory.</em></p>
        {% endif %}
      {% endif %}
    </main>
    <footer class="container">
      <nav>
        <ul>
          <li>
            {% if parent_path %}
            <a href="{{ parent_path }}" role="button" class="outline secondary">&lt; Up to Parent Directory</a>
            {% else %}
            <button disabled class="outline secondary">&lt; Up to Parent Directory</button>
            {% endif %}
          </li>
        </ul>
      </nav>
    </footer>
    <mbr-browse></mbr-browse>
    <mbr-live-reload></mbr-live-reload>
  </body>
  <script defer type="module" src="/.mbr/components/mbr-components.js"></script>
</html>
