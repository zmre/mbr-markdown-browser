{% set asset_base = relative_base | default(value="/.mbr/") %}
{% include "_head.html" %}
    {# HLJS and KaTeX CSS are now loaded dynamically by mbr-hljs and mbr-katex components #}
    {% if tags %}
    <meta name="keywords" content="{{tags | safe}}" data-pagefind-filter="tag[content]" />
    {% elif keywords %}
    <meta name="keywords" content="{{keywords | safe}}" data-pagefind-filter="tag[content]" />
    {% elif taxonomy.tags %}
    <meta name="keywords" content="{{taxonomy.tags | safe}}" data-pagefind-filter="tag[content]" />
    {% endif %}
    <title>{{title | default(value="") | safe}}</title>
    <meta name="title" content="{{title | default(value="") | safe}}" data-pagefind-meta="title[content]" />
    <meta name="description" content="{{description | default(value="") | safe}}" data-pagefind-meta="description[content]" />
    <meta http-equiv="last-modified" content="{{date | default(value="") | safe}}" data-pagefind-sort="date[content]" />
    <script>
      // Frontmatter available to page scripts (excludes rendered markdown for efficiency)
      window.frontmatter = {{ frontmatter_json | safe }};
      // Headings for table of contents
      window.headings = [
        {% for heading in headings %}
        { level: {{ heading.level }}, id: "{{ heading.id }}", text: "{{ heading.text | escape }}" }{% if not loop.last %},{% endif %}
        {% endfor %}
      ];
    </script>
